<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>40-Day Habit Tracker</title>
    <script src="https://unpkg.com/react@18/umd/react.development.js"></script>
    <script src="https://unpkg.com/react-dom@18/umd/react-dom.development.js"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://unpkg.com/lucide@latest/dist/umd/lucide.js"></script>
    <style>
        .animate-bounce {
            animation: bounce 1s infinite;
        }
        @keyframes bounce {
            0%, 20%, 53%, 80%, 100% {
                transform: translate3d(0,0,0);
            }
            40%, 43% {
                transform: translate3d(0,-30px,0);
            }
            70% {
                transform: translate3d(0,-15px,0);
            }
            90% {
                transform: translate3d(0,-4px,0);
            }
        }
        .animate-pulse {
            animation: pulse 2s cubic-bezier(0.4, 0, 0.6, 1) infinite;
        }
        @keyframes pulse {
            0%, 100% {
                opacity: 1;
            }
            50% {
                opacity: .5;
            }
        }
    </style>
</head>
<body>
    <div id="root"></div>

    <script type="text/babel">
        const { useState, useEffect } = React;
        const { 
            CheckCircle, Circle, Calendar, TrendingUp, Target, Flame, Award, 
            Settings, Plus, X, Edit2, ChevronUp, ChevronDown, Download, Upload, 
            Cloud, CloudOff 
        } = lucide;

        const HabitTracker = () => {
            const [currentDay, setCurrentDay] = useState(1);
            const [activities, setActivities] = useState([
                { id: 1, name: 'Morning Exercise', color: 'from-blue-400 to-blue-600', icon: 'ðŸƒâ€â™‚ï¸' },
                { id: 2, name: 'Read 30 Minutes', color: 'from-green-400 to-green-600', icon: 'ðŸ“š' },
                { id: 3, name: 'Meditate', color: 'from-purple-400 to-purple-600', icon: 'ðŸ§˜â€â™€ï¸' },
                { id: 4, name: 'Drink 8 Glasses Water', color: 'from-cyan-400 to-cyan-600', icon: 'ðŸ’§' },
                { id: 5, name: 'Journal', color: 'from-orange-400 to-orange-600', icon: 'âœï¸' }
            ]);
            
            const [completedActivities, setCompletedActivities] = useState({});
            const [showCelebration, setShowCelebration] = useState(false);
            const [isEditingActivities, setIsEditingActivities] = useState(false);
            const [newActivity, setNewActivity] = useState({ name: '', icon: 'âœ¨' });
            const [editingActivity, setEditingActivity] = useState(null);
            
            // Supabase state
            const [supabaseUrl, setSupabaseUrl] = useState('');
            const [supabaseKey, setSupabaseKey] = useState('');
            const [userId, setUserId] = useState('');
            const [isConnected, setIsConnected] = useState(false);
            const [showSupabaseSetup, setShowSupabaseSetup] = useState(false);

            // Initialize completed activities structure
            useEffect(() => {
                const initialState = {};
                for (let day = 1; day <= 40; day++) {
                    initialState[day] = {};
                    activities.forEach(activity => {
                        initialState[day][activity.id] = false;
                    });
                }
                setCompletedActivities(initialState);
            }, []);

            const toggleActivity = (dayNum, activityId) => {
                setCompletedActivities(prev => ({
                    ...prev,
                    [dayNum]: {
                        ...prev[dayNum],
                        [activityId]: !prev[dayNum]?.[activityId]
                    }
                }));

                // Show celebration if this completes all activities for the day
                const dayActivities = { ...completedActivities[dayNum] };
                dayActivities[activityId] = !dayActivities[activityId];
                const allCompleted = activities.every(activity => dayActivities[activity.id]);
                
                if (allCompleted && !completedActivities[dayNum]?.[activityId]) {
                    setShowCelebration(true);
                    setTimeout(() => setShowCelebration(false), 2000);
                }
            };

            const getActivityStreak = (activityId) => {
                let streak = 0;
                for (let day = currentDay; day >= 1; day--) {
                    if (completedActivities[day]?.[activityId]) {
                        streak++;
                    } else {
                        break;
                    }
                }
                return streak;
            };

            const getTotalProgress = () => {
                let completed = 0;
                let total = 0;
                for (let day = 1; day <= 40; day++) {
                    activities.forEach(activity => {
                        total++;
                        if (completedActivities[day]?.[activity.id]) {
                            completed++;
                        }
                    });
                }
                return Math.round((completed / total) * 100);
            };

            const getDayProgress = (dayNum) => {
                if (!completedActivities[dayNum]) return 0;
                const completed = activities.filter(activity => completedActivities[dayNum][activity.id]).length;
                return Math.round((completed / activities.length) * 100);
            };

            const getCompletedDays = () => {
                let completedDays = 0;
                for (let day = 1; day <= 40; day++) {
                    if (getDayProgress(day) === 100) {
                        completedDays++;
                    }
                }
                return completedDays;
            };

            const availableColors = [
                'from-blue-400 to-blue-600',
                'from-green-400 to-green-600',
                'from-purple-400 to-purple-600',
                'from-cyan-400 to-cyan-600',
                'from-orange-400 to-orange-600',
                'from-pink-400 to-pink-600',
                'from-red-400 to-red-600',
                'from-indigo-400 to-indigo-600',
                'from-yellow-400 to-yellow-600',
                'from-teal-400 to-teal-600'
            ];

            const availableIcons = ['âœ¨', 'ðŸƒâ€â™‚ï¸', 'ðŸ“š', 'ðŸ§˜â€â™€ï¸', 'ðŸ’§', 'âœï¸', 'ðŸŽ', 'ðŸ’ª', 'ðŸŽ¯', 'ðŸŒ±', 'ðŸŽµ', 'ðŸ”¥', 'â­', 'ðŸš€', 'ðŸ’'];

            const addActivity = () => {
                if (!newActivity.name.trim()) return;
                
                const maxId = Math.max(...activities.map(a => a.id), 0);
                const newId = maxId + 1;
                const randomColor = availableColors[Math.floor(Math.random() * availableColors.length)];
                
                const activity = {
                    id: newId,
                    name: newActivity.name,
                    color: randomColor,
                    icon: newActivity.icon
                };

                setActivities([...activities, activity]);
                setNewActivity({ name: '', icon: 'âœ¨' });

                // Initialize this activity in all days
                setCompletedActivities(prev => {
                    const updated = { ...prev };
                    for (let day = 1; day <= 40; day++) {
                        if (!updated[day]) updated[day] = {};
                        updated[day][newId] = false;
                    }
                    return updated;
                });
            };

            const deleteActivity = (activityId) => {
                setActivities(activities.filter(a => a.id !== activityId));
                
                // Remove from completed activities
                setCompletedActivities(prev => {
                    const updated = { ...prev };
                    for (let day = 1; day <= 40; day++) {
                        if (updated[day]) {
                            delete updated[day][activityId];
                        }
                    }
                    return updated;
                });
            };

            const updateActivity = (activityId, updates) => {
                setActivities(activities.map(a => 
                    a.id === activityId ? { ...a, ...updates } : a
                ));
                setEditingActivity(null);
            };

            const moveActivity = (activityId, direction) => {
                const currentIndex = activities.findIndex(a => a.id === activityId);
                const newIndex = direction === 'up' ? currentIndex - 1 : currentIndex + 1;
                
                if (newIndex < 0 || newIndex >= activities.length) return;
                
                const newActivities = [...activities];
                [newActivities[currentIndex], newActivities[newIndex]] = [newActivities[newIndex], newActivities[currentIndex]];
                setActivities(newActivities);
            };

            const exportData = () => {
                const exportObject = {
                    version: '1.0',
                    exportDate: new Date().toISOString(),
                    currentDay,
                    activities,
                    completedActivities
                };
                
                const dataStr = JSON.stringify(exportObject, null, 2);
                const dataBlob = new Blob([dataStr], { type: 'application/json' });
                const url = URL.createObjectURL(dataBlob);
                
                const link = document.createElement('a');
                link.href = url;
                link.download = `40-day-tracker-${new Date().toISOString().split('T')[0]}.json`;
                document.body.appendChild(link);
                link.click();
                document.body.removeChild(link);
                URL.revokeObjectURL(url);
            };

            const importData = (event) => {
                const file = event.target.files[0];
                if (!file) return;

                const reader = new FileReader();
                reader.onload = (e) => {
                    try {
                        const importedData = JSON.parse(e.target.result);
                        
                        // Validate the imported data
                        if (importedData.activities && importedData.completedActivities) {
                            setActivities(importedData.activities);
                            setCompletedActivities(importedData.completedActivities);
                            if (importedData.currentDay) {
                                setCurrentDay(importedData.currentDay);
                            }
                            alert('Data imported successfully!');
                        } else {
                            alert('Invalid file format. Please select a valid tracker export file.');
                        }
                    } catch (error) {
                        alert('Error reading file. Please make sure it\'s a valid JSON export file.');
                    }
                };
                reader.readAsText(file);
                
                // Reset the input
                event.target.value = '';
            };

            const connectToSupabase = () => {
                if (supabaseUrl && supabaseKey && userId) {
                    setIsConnected(true);
                    setShowSupabaseSetup(false);
                    alert('Successfully connected to Supabase! Your data will now sync to the cloud.');
                }
            };

            return (
                <div className="min-h-screen bg-gradient-to-br from-indigo-50 via-white to-purple-50">
                    {/* Celebration Animation */}
                    {showCelebration && (
                        <div className="fixed inset-0 flex items-center justify-center z-50 pointer-events-none">
                            <div className="animate-bounce text-6xl">ðŸŽ‰</div>
                        </div>
                    )}

                    {/* Header */}
                    <div className="bg-white/80 backdrop-blur-sm border-b border-gray-200/50 sticky top-0 z-40">
                        <div className="max-w-6xl mx-auto px-6 py-6">
                            <div className="flex items-center justify-between flex-wrap gap-4">
                                <div className="flex items-center gap-3">
                                    <div className="p-3 bg-gradient-to-r from-indigo-500 to-purple-600 rounded-xl text-white">
                                        <Target size={24} />
                                    </div>
                                    <div>
                                        <h1 className="text-2xl font-bold text-gray-800">40-Day Challenge</h1>
                                        <p className="text-gray-600">Transform your habits, day by day</p>
                                    </div>
                                </div>
                                <div className="flex items-center gap-6">
                                    <div className="flex items-center gap-2">
                                        <button
                                            onClick={() => setShowSupabaseSetup(true)}
                                            className={`flex items-center gap-2 px-3 py-2 rounded-xl transition-all duration-200 ${
                                                isConnected 
                                                    ? 'bg-green-100 text-green-700' 
                                                    : 'bg-yellow-100 text-yellow-700 hover:bg-yellow-200'
                                            }`}
                                            title={isConnected ? 'Connected to cloud' : 'Setup cloud sync'}
                                        >
                                            {isConnected ? <Cloud size={16} /> : <CloudOff size={16} />}
                                            <span className="hidden sm:inline">{isConnected ? 'Cloud' : 'Setup'}</span>
                                        </button>
                                        <button
                                            onClick={exportData}
                                            className="flex items-center gap-2 px-3 py-2 bg-blue-100 text-blue-700 hover:bg-blue-200 rounded-xl transition-all duration-200"
                                            title="Export backup file"
                                        >
                                            <Download size={16} />
                                            <span className="hidden sm:inline">Export</span>
                                        </button>
                                        <label className="flex items-center gap-2 px-3 py-2 bg-purple-100 text-purple-700 hover:bg-purple-200 rounded-xl transition-all duration-200 cursor-pointer">
                                            <Upload size={16} />
                                            <span className="hidden sm:inline">Import</span>
                                            <input
                                                type="file"
                                                accept=".json"
                                                onChange={importData}
                                                className="hidden"
                                            />
                                        </label>
                                    </div>
                                    <button
                                        onClick={() => setIsEditingActivities(!isEditingActivities)}
                                        className={`flex items-center gap-2 px-4 py-2 rounded-xl transition-all duration-200 ${
                                            isEditingActivities 
                                                ? 'bg-indigo-100 text-indigo-700' 
                                                : 'bg-gray-100 text-gray-700 hover:bg-gray-200'
                                        }`}
                                    >
                                        <Settings size={16} />
                                        <span className="hidden sm:inline">Edit Activities</span>
                                    </button>
                                    <div className="text-center">
                                        <div className="text-2xl font-bold text-indigo-600">{getCompletedDays()}/40</div>
                                        <div className="text-sm text-gray-600">Perfect Days</div>
                                    </div>
                                    <div className="text-center">
                                        <div className="text-2xl font-bold text-purple-600">{getTotalProgress()}%</div>
                                        <div className="text-sm text-gray-600">Overall Progress</div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <div className="max-w-6xl mx-auto px-6 py-8">
                        {/* Supabase Setup Modal */}
                        {showSupabaseSetup && (
                            <div className="fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4">
                                <div className="bg-white rounded-2xl shadow-2xl max-w-md w-full p-6">
                                    <div className="flex items-center justify-between mb-4">
                                        <h3 className="text-xl font-bold text-gray-800">Cloud Sync Setup</h3>
                                        <button
                                            onClick={() => setShowSupabaseSetup(false)}
                                            className="p-2 hover:bg-gray-100 rounded-lg"
                                        >
                                            <X size={20} />
                                        </button>
                                    </div>
                                    
                                    {!isConnected ? (
                                        <div className="space-y-4">
                                            <div>
                                                <label className="block text-sm font-medium text-gray-700 mb-2">
                                                    Supabase Project URL
                                                </label>
                                                <input
                                                    type="text"
                                                    value={supabaseUrl}
                                                    onChange={(e) => setSupabaseUrl(e.target.value)}
                                                    placeholder="https://your-project.supabase.co"
                                                    className="w-full p-3 border border-gray-300 rounded-lg focus:border-indigo-500 focus:outline-none"
                                                />
                                            </div>
                                            
                                            <div>
                                                <label className="block text-sm font-medium text-gray-700 mb-2">
                                                    Supabase API Key
                                                </label>
                                                <input
                                                    type="password"
                                                    value={supabaseKey}
                                                    onChange={(e) => setSupabaseKey(e.target.value)}
                                                    placeholder="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9..."
                                                    className="w-full p-3 border border-gray-300 rounded-lg focus:border-indigo-500 focus:outline-none"
                                                />
                                            </div>
                                            
                                            <div>
                                                <label className="block text-sm font-medium text-gray-700 mb-2">
                                                    Your User ID
                                                </label>
                                                <input
                                                    type="text"
                                                    value={userId}
                                                    onChange={(e) => setUserId(e.target.value)}
                                                    placeholder="your-name-or-email"
                                                    className="w-full p-3 border border-gray-300 rounded-lg focus:border-indigo-500 focus:outline-none"
                                                />
                                            </div>
                                            
                                            <button
                                                onClick={connectToSupabase}
                                                disabled={!supabaseUrl || !supabaseKey || !userId}
                                                className="w-full px-4 py-3 bg-gradient-to-r from-indigo-500 to-purple-600 text-white rounded-lg hover:opacity-90 disabled:opacity-50 disabled:cursor-not-allowed transition-all duration-200"
                                            >
                                                Connect to Cloud
                                            </button>
                                            
                                            <div className="text-xs text-gray-500 space-y-1">
                                                <p>ðŸ’¡ Your database tables are ready!</p>
                                                <p>ðŸ”’ Your credentials are stored locally</p>
                                            </div>
                                        </div>
                                    ) : (
                                        <div className="text-center space-y-4">
                                            <div className="text-green-600">
                                                <Cloud size={48} className="mx-auto mb-2" />
                                                <p className="font-semibold">Connected to Cloud!</p>
                                                <p className="text-sm text-gray-600">Your progress syncs to Supabase</p>
                                            </div>
                                            <button
                                                onClick={() => {
                                                    setIsConnected(false);
                                                    setShowSupabaseSetup(false);
                                                }}
                                                className="w-full px-4 py-2 bg-gray-100 text-gray-700 rounded-lg hover:bg-gray-200 transition-all duration-200"
                                            >
                                                Disconnect
                                            </button>
                                        </div>
                                    )}
                                </div>
                            </div>
                        )}

                        {/* Activity Editor */}
                        {isEditingActivities && (
                            <div className="bg-white rounded-2xl shadow-xl border border-gray-100 overflow-hidden mb-8">
                                <div className="bg-gradient-to-r from-gray-700 to-gray-900 px-6 py-4">
                                    <h2 className="text-xl font-bold text-white">Customize Your Activities</h2>
                                </div>
                                
                                <div className="p-6 space-y-6">
                                    {/* Add New Activity */}
                                    <div className="bg-gray-50 rounded-xl p-4">
                                        <h3 className="font-semibold text-gray-800 mb-4">Add New Activity</h3>
                                        <div className="flex gap-3">
                                            <select
                                                value={newActivity.icon}
                                                onChange={(e) => setNewActivity({ ...newActivity, icon: e.target.value })}
                                                className="p-2 rounded-lg border border-gray-300 bg-white text-xl"
                                            >
                                                {availableIcons.map(icon => (
                                                    <option key={icon} value={icon}>{icon}</option>
                                                ))}
                                            </select>
                                            <input
                                                type="text"
                                                value={newActivity.name}
                                                onChange={(e) => setNewActivity({ ...newActivity, name: e.target.value })}
                                                placeholder="Activity name (e.g., Walk 10,000 steps)"
                                                className="flex-1 p-3 rounded-lg border border-gray-300 focus:border-indigo-500 focus:outline-none"
                                                onKeyPress={(e) => e.key === 'Enter' && addActivity()}
                                            />
                                            <button
                                                onClick={addActivity}
                                                disabled={!newActivity.name.trim()}
                                                className="px-6 py-3 bg-gradient-to-r from-indigo-500 to-purple-600 text-white rounded-lg hover:opacity-90 disabled:opacity-50 disabled:cursor-not-allowed transition-all duration-200"
                                            >
                                                <Plus size={20} />
                                            </button>
                                        </div>
                                    </div>

                                    {/* Existing Activities */}
                                    <div>
                                        <h3 className="font-semibold text-gray-800 mb-4">Your Activities</h3>
                                        <div className="space-y-3">
                                            {activities.map((activity, index) => (
                                                <div key={activity.id} className="flex items-center gap-4 p-4 bg-gray-50 rounded-xl">
                                                    {editingActivity === activity.id ? (
                                                        <>
                                                            <select
                                                                value={activity.icon}
                                                                onChange={(e) => updateActivity(activity.id, { icon: e.target.value })}
                                                                className="p-2 rounded-lg border border-gray-300 bg-white text-xl"
                                                            >
                                                                {availableIcons.map(icon => (
                                                                    <option key={icon} value={icon}>{icon}</option>
                                                                ))}
                                                            </select>
                                                            <input
                                                                type="text"
                                                                value={activity.name}
                                                                onChange={(e) => updateActivity(activity.id, { name: e.target.value })}
                                                                className="flex-1 p-2 rounded-lg border border-gray-300 focus:border-indigo-500 focus:outline-none"
                                                                onKeyPress={(e) => e.key === 'Enter' && setEditingActivity(null)}
                                                                onBlur={() => setEditingActivity(null)}
                                                                autoFocus
                                                            />
                                                        </>
                                                    ) : (
                                                        <>
                                                            <div className="text-2xl">{activity.icon}</div>
                                                            <div className="flex-1 font-medium text-gray-800">{activity.name}</div>
                                                            <div className="flex items-center gap-1">
                                                                <button
                                                                    onClick={() => moveActivity(activity.id, 'up')}
                                                                    disabled={index === 0}
                                                                    className="p-1.5 text-gray-500 hover:text-indigo-600 hover:bg-indigo-100 rounded-lg transition-all duration-200 disabled:opacity-30 disabled:cursor-not-allowed"
                                                                    title="Move up"
                                                                >
                                                                    <ChevronUp size={16} />
                                                                </button>
                                                                <button
                                                                    onClick={() => moveActivity(activity.id, 'down')}
                                                                    disabled={index === activities.length - 1}
                                                                    className="p-1.5 text-gray-500 hover:text-indigo-600 hover:bg-indigo-100 rounded-lg transition-all duration-200 disabled:opacity-30 disabled:cursor-not-allowed"
                                                                    title="Move down"
                                                                >
                                                                    <ChevronDown size={16} />
                                                                </button>
                                                            </div>
                                                            <button
                                                                onClick={() => setEditingActivity(activity.id)}
                                                                className="p-2 text-gray-500 hover:text-indigo-600 hover:bg-indigo-100 rounded-lg transition-all duration-200"
                                                                title="Edit activity"
                                                            >
                                                                <Edit2 size={16} />
                                                            </button>
                                                            <button
                                                                onClick={() => deleteActivity(activity.id)}
                                                                className="p-2 text-gray-500 hover:text-red-600 hover:bg-red-100 rounded-lg transition-all duration-200"
                                                                title="Delete activity"
                                                            >
                                                                <X size={16} />
                                                            </button>
                                                        </>
                                                    )}
                                                </div>
                                            ))}
                                        </div>
                                    </div>
                                </div>
                            </div>
                        )}

                        {/* Day Selector */}
                        <div className="mb-8">
                            <div className="flex items-center gap-4 mb-4">
                                <Calendar size={20} className="text-indigo-600" />
                                <h2 className="text-lg font-semibold text-gray-800">Select Day</h2>
                            </div>
                            <div className="flex flex-wrap gap-2">
                                {Array.from({ length: 40 }, (_, i) => i + 1).map(day => (
                                    <button
                                        key={day}
                                        onClick={() => setCurrentDay(day)}
                                        className={`w-12 h-12 rounded-lg font-semibold transition-all duration-200 ${
                                            currentDay === day
                                                ? 'bg-gradient-to-r from-indigo-500 to-purple-600 text-white shadow-lg scale-110'
                                                : getDayProgress(day) === 100
                                                ? 'bg-gradient-to-r from-green-400 to-green-600 text-white'
                                                : getDayProgress(day) > 0
                                                ? 'bg-gradient-to-r from-yellow-400 to-orange-500 text-white'
                                                : 'bg-white border-2 border-gray-200 text-gray-600 hover:border-indigo-300'
                                        }`}
                                    >
                                        {day}
                                    </button>
                                ))}
                            </div>
                        </div>

                        {/* Current Day Activities */}
                        <div className="bg-white rounded-2xl shadow-xl border border-gray-100 overflow-hidden mb-8">
                            <div className="bg-gradient-to-r from-indigo-500 to-purple-600 px-6 py-4">
                                <div className="flex items-center justify-between text-white">
                                    <h2 className="text-xl font-bold">Day {currentDay} Activities</h2>
                                    <div className="flex items-center gap-2">
                                        <div className="text-sm opacity-90">Progress:</div>
                                        <div className="text-lg font-bold">{getDayProgress(currentDay)}%</div>
                                    </div>
                                </div>
                            </div>
                            
                            <div className="p-6 space-y-4">
                                {activities.map(activity => {
                                    const isCompleted = completedActivities[currentDay]?.[activity.id];
                                    const streak = getActivityStreak(activity.id);
                                    
                                    return (
                                        <div
                                            key={activity.id}
                                            className={`p-4 rounded-xl border-2 transition-all duration-300 cursor-pointer ${
                                                isCompleted
                                                    ? 'border-green-300 bg-green-50'
                                                    : 'border-gray-200 bg-gray-50 hover:border-indigo-300 hover:bg-indigo-50'
                                            }`}
                                            onClick={() => toggleActivity(currentDay, activity.id)}
                                        >
                                            <div className="flex items-center justify-between">
                                                <div className="flex items-center gap-4">
                                                    <div className="text-2xl">{activity.icon}</div>
                                                    <div>
                                                        <h3 className="font-semibold text-gray-800">{activity.name}</h3>
                                                        {streak > 0 && (
                                                            <div className="flex items-center gap-1 mt-1">
                                                                <Flame size={16} className="text-orange-500" />
                                                                <span className="text-sm text-orange-600">{streak} day streak</span>
                                                            </div>
                                                        )}
                                                    </div>
                                                </div>
                                                <div className={`p-2 rounded-full transition-all duration-200 ${
                                                    isCompleted ? 'bg-green-500' : 'bg-gray-300'
                                                }`}>
                                                    {isCompleted ? (
                                                        <CheckCircle size={24} className="text-white" />
                                                    ) : (
                                                        <Circle size={24} className="text-white" />
                                                    )}
                                                </div>
                                            </div>
                                        </div>
                                    );
                                })}
                            </div>
                        </div>

                        {/* Statistics Cards */}
                        <div className="grid grid-cols-1 md:grid-cols-3 gap-6 mb-8">
                            <div className="bg-white rounded-xl p-6 shadow-lg border border-gray-100">
                                <div className="flex items-center gap-3 mb-4">
                                    <div className="p-2 bg-blue-100 rounded-lg">
                                        <TrendingUp size={24} className="text-blue-600" />
                                    </div>
                                    <h3 className="font-semibold text-gray-800">Best Streak</h3>
                                </div>
                                <div className="text-2xl font-bold text-blue-600">
                                    {Math.max(...activities.map(activity => getActivityStreak(activity.id)))} days
                                </div>
                            </div>

                            <div className="bg-white rounded-xl p-6 shadow-lg border border-gray-100">
                                <div className="flex items-center gap-3 mb-4">
                                    <div className="p-2 bg-green-100 rounded-lg">
                                        <Award size={24} className="text-green-600" />
                                    </div>
                                    <h3 className="font-semibold text-gray-800">Perfect Days</h3>
                                </div>
                                <div className="text-2xl font-bold text-green-600">{getCompletedDays()}/40</div>
                            </div>

                            <div className="bg-white rounded-xl p-6 shadow-lg border border-gray-100">
                                <div className="flex items-center gap-3 mb-4">
                                    <div className="p-2 bg-purple-100 rounded-lg">
                                        <Target size={24} className="text-purple-600" />
                                    </div>
                                    <h3 className="font-semibold text-gray-800">Overall Progress</h3>
                                </div>
                                <div className="text-2xl font-bold text-purple-600">{getTotalProgress()}%</div>
                            </div>
                        </div>

                        {/* Progress Overview */}
                        <div className="bg-white rounded-2xl shadow-xl border border-gray-100 overflow-hidden">
                            <div className="bg-gradient-to-r from-gray-50 to-gray-100 px-6 py-4 border-b">
                                <h2 className="text-xl font-bold text-gray-800">40-Day Overview</h2>
                            </div>
                            <div className="p-6">
                                <div className="grid grid-cols-10 gap-2">
                                    {Array.from({ length: 40 }, (_, i) => i + 1).map(day => {
                                        const progress = getDayProgress(day);
                                        return (
                                            <div
                                                key={day}
                                                className={`w-full h-8 rounded-md border-2 cursor-pointer transition-all duration-200 flex items-center justify-center text-xs font-semibold ${
                                                    day === currentDay
                                                        ? 'border-indigo-500 bg-indigo-100'
                                                        : progress === 100
                                                        ? 'border-green-400 bg-green-400 text-white'
                                                        : progress > 0
                                                        ? 'border-yellow-400 bg-yellow-400 text-white'
                                                        : 'border-gray-200 bg-gray-100 text-gray-500'
                                                }`}
                                                onClick={() => setCurrentDay(day)}
                                                title={`Day ${day}: ${progress}% complete`}
                                            >
                                                {day}
                                            </div>
                                        );
                                    })}
                                </div>
                                <div className="flex items-center justify-center gap-6 mt-4 text-sm">
                                    <div className="flex items-center gap-2">
                                        <div className="w-4 h-4 bg-gray-100 border border-gray-200 rounded"></div>
                                        <span>Not started</span>
                                    </div>
                                    <div className="flex items-center gap-2">
                                        <div className="w-4 h-4 bg-yellow-400 rounded"></div>
                                        <span>In progress</span>
                                    </div>
                                    <div className="flex items-center gap-2">
                                        <div className="w-4 h-4 bg-green-400 rounded"></div>
                                        <span>Complete</span>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            );
        };

        ReactDOM.render(<HabitTracker />, document.getElementById('root'));
    </script>
</body>
</html>
